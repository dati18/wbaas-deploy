repositories:
  - name: wbstack-charts
    url: git+https://github.com/wbstack/deploy/@charts/api?ref=main

releases:
- name: api
  chart: wbstack-charts/api
  namespace: default
  # TODO differ between production and localhost
  set:
  - name: app.passport.public
    file: ./../../../oauth-public.key
  - name: app.passport.private
    file: ./../../../oauth-private.key
  values:
    # TODO when values are split by environment useProbes should be TRUE in production deployments!
  - "values.yaml.gotmpl"

environments:
  production:
    kubeContext: gke_wikibase-cloud_europe-west3-a_wbaas-1
    values:
    - ./../env/production/base.yaml
    - ./../env/production/private.yaml
  local:
    kubeContext: minikube-wbaas
    values:
    # - ./../env/local/base.yaml
    # - ./../env/local/private.yaml